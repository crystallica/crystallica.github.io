<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>CRST Clicker — Web App</title>
  <style>
    :root{
      --bg:#0b0d10;
      --panel:#0f1114;
      --muted:#98a0b3;
      --accent1:#6ee7b7; /* base accent */
      --accent2:#7cc3ff; /* secondary */
      --glass: rgba(255,255,255,0.03);
      --font: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    html,body{height:100%;}
    body{
      margin:0; padding:0; height:100%; display:flex; align-items:center; justify-content:center; background:radial-gradient(1200px 600px at 10% 10%, rgba(124,195,255,0.03), transparent), radial-gradient(1000px 500px at 90% 90%, rgba(110,231,183,0.02), transparent), var(--bg); font-family:var(--font); color:#dce6f0;
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }

    .container{
      width:100%; max-width:680px; padding:48px; box-sizing:border-box; display:flex; flex-direction:column; align-items:center; gap:28px;
      backdrop-filter: blur(6px);
    }

    .panel{
      width:100%; background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.00)); border-radius:18px; border:1px solid rgba(255,255,255,0.03); padding:48px; box-sizing:border-box; display:flex; flex-direction:column; align-items:center; gap:20px; box-shadow: 0 8px 30px rgba(0,0,0,0.6);
    }

    .title{font-size:48px; letter-spacing:0.08em; color:var(--muted); text-transform:uppercase}

    .balance{
      font-weight:600; font-size:34px; line-height:1; font-variant-numeric: tabular-nums; color: #eaf7ff; text-shadow: 0 2px 10px rgba(0,0,0,0.6);
    }

    /* Button area */
    .center{
      position:relative; width:260px; height:260px; display:flex; align-items:center; justify-content:center;
    }

    .glow{
      position:absolute; width:420px; height:420px; border-radius:50%; pointer-events:none; filter:blur(30px); opacity:0; transition:opacity 450ms ease; mix-blend-mode:screen;
      background: radial-gradient(circle at 30% 30%, rgba(124,195,255,0.16), rgba(110,231,183,0.12), rgba(124,195,255,0.04));
      transform:scale(0.95);
    }

    .btn{
      --size:180px;
      width:var(--size); height:var(--size); border-radius:50%; display:inline-grid; place-items:center; cursor:pointer; user-select:none; outline:none; border:0; position:relative; z-index:2;
      background:linear-gradient(160deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      box-shadow: 0 10px 40px rgba(5,8,12,0.7), inset 0 1px 0 rgba(255,255,255,0.02);
      transition: transform 360ms cubic-bezier(.2,.9,.25,1), box-shadow 360ms ease;
    }

    .btn-inner{
      width:86%; height:86%; border-radius:50%; display:grid; place-items:center; font-weight:700; font-size:18px; color:#021018; background: linear-gradient(135deg, var(--accent1), var(--accent2)); transform:translateZ(0); transition: transform 600ms cubic-bezier(.2,.9,.25,1), filter 720ms ease, background 600ms ease;
      box-shadow: 0 12px 30px rgba(2,16,24,0.56), inset 0 -6px 30px rgba(255,255,255,0.06);
    }

    .btn:focus{box-shadow:0 18px 60px rgba(2,12,20,0.7);}

    .btn:hover{ transform: scale(1.03); }

    .btn:hover .btn-inner{ transform: translateY(-6px) scale(1.01); filter:brightness(1.02) saturate(1.06); }

    .btn.down{ transform: scale(0.98); }
    .btn.down .btn-inner{ transform: translateY(2px) scale(0.98) rotate(-0.2deg); filter:brightness(0.98) saturate(1.02); }

    /* tiny ripple */
    .ripple{
      position:absolute; border-radius:50%; pointer-events:none; transform:scale(0); opacity:0.9; mix-blend-mode:screen; filter:blur(10px);
    }

    /* footer controls */
    .meta{display:flex; gap:12px; align-items:center; color:var(--muted); font-size:13px}

    .hint{font-size:13px; color:var(--muted)}

    /* micro animation for the counter change */
    .delta{
      position:relative; display:inline-block; margin-left:0px; font-weight:600; color: #8fffdc; transform-origin:center; opacity:0; transform:translateY(-8px) scale(0.98);
      transition: transform 420ms cubic-bezier(.2,.9,.25,1), opacity 420ms ease;
    }

    .delta.show{ opacity:1; transform:translateY(4px) scale(1.02); }

    /* make small on mobile */
    @media (max-width:420px){ .panel{ padding:28px } .btn{ --size:150px } }
  </style>
</head>
<body>
  <div class="container">
    <div class="panel">
      <div class="title">CRST</div>
      <div class="center">
        <div id="glow" class="glow"></div>

        <button id="clicker" class="btn" aria-label="Click to gain CRST">
          <div class="btn-inner"></div>
        </button>

        <!-- ripple container is the same center -->
      </div>

      <div style="text-align:center;">
        <div class="balance" id="balance">0.0000 <span style="font-weight:400; font-size:14px; color:var(--muted);">CRST</span></div>
        <div class="meta" style="justify-content:center; margin-top:8px;"><div class="hint">+0.0001 per click</div><div id="delta" class="delta">+0.0001</div></div>
      </div>

      <div style="width:100%; display:flex; justify-content:space-between; align-items:center; gap:12px; margin-top:8px;">
        <div class="hint"></div>
        <div class="hint"></div>
      </div>
    </div>
  </div>

  <script>
    // basic app state
    let balance = 0.0;
    const step = 0.0001;
    const balanceEl = document.getElementById('balance');
    const clicker = document.getElementById('clicker');
    const glow = document.getElementById('glow');
    const delta = document.getElementById('delta');

    function formatBal(n){
      // ensure fixed 4 decimals, uses rounding to 4 decimals
      return n.toFixed(4);
    }

    function updateBalanceUI(){
      balanceEl.innerHTML = formatBal(balance) + ' <span style="font-weight:400; font-size:14px; color:var(--muted);">CRST</span>';
    }

    // glow pulse helper
    let glowTimeout = null;
    function pulseGlow(intensity = 1){
      glow.style.opacity = Math.min(0.9, 0.18 * intensity + 0.02);
      glow.style.transform = 'scale(' + (0.96 + 0.06 * intensity) + ')';
      if(glowTimeout) clearTimeout(glowTimeout);
      glowTimeout = setTimeout(()=>{
        glow.style.transition = 'opacity 800ms cubic-bezier(.2,.9,.25,1), transform 800ms ease';
        glow.style.opacity = 0;
      }, 120);
      // reset transition after trigger for hover smoothness
      setTimeout(()=>{ glow.style.transition = 'opacity 450ms ease, transform 450ms ease'; }, 900);
    }

    // little ripple effect
    function createRipple(x,y){
      const r = document.createElement('div');
      r.className = 'ripple';
      const size = Math.max(40, Math.min(220, Math.random()*160 + 40));
      r.style.width = r.style.height = size + 'px';
      r.style.left = (x - size/2) + 'px';
      r.style.top = (y - size/2) + 'px';
      r.style.background = 'radial-gradient(circle at 30% 30%, rgba(124,195,255,0.18), rgba(110,231,183,0.12), rgba(124,195,255,0.02))';
      r.style.opacity = '0.9';
      r.style.transition = 'transform 900ms cubic-bezier(.2,.9,.25,1), opacity 900ms ease';
      r.style.transform = 'scale(0)';
      r.style.zIndex = 1;
      document.querySelector('.center').appendChild(r);
      requestAnimationFrame(()=>{
        r.style.transform = 'scale(1.6)';
        r.style.opacity = '0';
      });
      setTimeout(()=>{ r.remove(); }, 950);
    }

    // click handler
    clicker.addEventListener('pointerdown', (e)=>{
      clicker.classList.add('down');
      // small immediate visual
      pulseGlow(1.2);
      // ripple centered at pointer inside center box
      const rect = document.querySelector('.center').getBoundingClientRect();
      createRipple(e.clientX - rect.left, e.clientY - rect.top);
    });
    clicker.addEventListener('pointerup', (e)=>{
      clicker.classList.remove('down');
      // increment balance smoothly
      balance = +(balance + step).toFixed(8);
      updateBalanceUI();

      // show +0.0001 delta animation
      delta.classList.remove('show');
      void delta.offsetWidth; // force reflow to restart animation
      delta.classList.add('show');
      setTimeout(()=> delta.classList.remove('show'), 700);

      // subtle long pulse
      pulseGlow(0.9);

      // if running inside Telegram WebApp, notify back
      try{
        if(window.Telegram && Telegram.WebApp){
          // example: Telegram.WebApp.sendData(JSON.stringify({event:'click', balance:balance}));
          // do not spam; only send occasionally or on demand. left commented as an example.
        }
      }catch(err){ /* ignore */ }
    });

    // hover behaviour for gentle color shift
    clicker.addEventListener('pointerenter', ()=>{
      glow.style.opacity = 0.18;
      glow.style.transform = 'scale(1.02)';
    });
    clicker.addEventListener('pointerleave', ()=>{
      glow.style.opacity = 0; glow.style.transform='scale(0.95)';
    });

    // make keyboard accessible
    clicker.addEventListener('keydown', (e)=>{ if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); clicker.click(); } });

    // initial render
    updateBalanceUI();

    // tiny smoke animation in background (pure CSS would be heavy — keep minimal)
  </script>
</body>
</html>
